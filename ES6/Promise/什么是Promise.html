<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>什么是Promise</title>
</head>
<body>
	<!-- Promise又三种状态：pending resolved rejected
	Promise一旦状态改变就不能再变。 -->
</body>
<script>
	/*
	//Promise内部的代码立即执行
	new Promise((resolve,reject) => {
		console.log('new Promise')
		resolve('success')

	})
	console.log('finish')
	*/
	/*
	// Promise实现了链式调用，也就是说每次调用then之后返回的都是一个Promise，并且是一个全新的Promise，原因也是因为状态不可变,如果在then中使用了return，
	那么return的值会被Promise.resolve包装。
	Promise.resolve(1)
	.then(res => {
		console.log(res)//1
		return 2//包装成了 Promise.resolve(2)
	})
	.then(res => {
		console.log(res)//2
	})
	*/

	ajax(url)
	.then(res => {
		console.log(res)
		return ajax(url1)
	})
	.then(res => {
		console.log(res)
		return ajax(url2)
	})
	.then(res => {
		console.log(res)
	})

	// 缺点：无法取消Promise，错误需要通过回调函数捕获
</script>
</html>