<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<!-- 在调用new的过程中会发生以上四件事 -->
	<!-- 1.新生成一个对象
	2.链接到原型
	3.绑定this
	4.返回新对象 -->
</body>
<script>
	function _new(fn, ...arg) {
        const obj = {}; //创建一个新的对象
        obj.__proto__ = fn.prototype; //把obj的__proto__指向fn的prototype,实现继承
        fn.apply(obj, arg) //改变this的指向
        return Object.prototype.toString.call(obj) == '[object Object]'? obj : {} //返回新的对象obj
    }

	function Parent(name){
		this.name = name
	}

	var obj = _new(Parent,'Tom')
	console.log(obj)
</script>
</html>